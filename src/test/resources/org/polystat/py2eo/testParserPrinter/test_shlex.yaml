python: |
  import io
  import itertools
  import shlex
  import string
  import unittest
  
  
  
  # The original test data set was from shellwords, by Hartmut Goebel.
  
  data = r"""x|x|
  foo bar|foo|bar|
   foo bar|foo|bar|
   foo bar |foo|bar|
  foo   bar    bla     fasel|foo|bar|bla|fasel|
  x y  z              xxxx|x|y|z|xxxx|
  \x bar|\|x|bar|
  \ x bar|\|x|bar|
  \ bar|\|bar|
  foo \x bar|foo|\|x|bar|
  foo \ x bar|foo|\|x|bar|
  foo \ bar|foo|\|bar|
  foo "bar" bla|foo|"bar"|bla|
  "foo" "bar" "bla"|"foo"|"bar"|"bla"|
  "foo" bar "bla"|"foo"|bar|"bla"|
  "foo" bar bla|"foo"|bar|bla|
  foo 'bar' bla|foo|'bar'|bla|
  'foo' 'bar' 'bla'|'foo'|'bar'|'bla'|
  'foo' bar 'bla'|'foo'|bar|'bla'|
  'foo' bar bla|'foo'|bar|bla|
  blurb foo"bar"bar"fasel" baz|blurb|foo"bar"bar"fasel"|baz|
  blurb foo'bar'bar'fasel' baz|blurb|foo'bar'bar'fasel'|baz|
  ""|""|
  ''|''|
  foo "" bar|foo|""|bar|
  foo '' bar|foo|''|bar|
  foo "" "" "" bar|foo|""|""|""|bar|
  foo '' '' '' bar|foo|''|''|''|bar|
  \""|\|""|
  "\"|"\"|
  "foo\ bar"|"foo\ bar"|
  "foo\\ bar"|"foo\\ bar"|
  "foo\\ bar\"|"foo\\ bar\"|
  "foo\\" bar\""|"foo\\"|bar|\|""|
  "foo\\ bar\" dfadf"|"foo\\ bar\"|dfadf"|
  "foo\\\ bar\" dfadf"|"foo\\\ bar\"|dfadf"|
  "foo\\\x bar\" dfadf"|"foo\\\x bar\"|dfadf"|
  "foo\x bar\" dfadf"|"foo\x bar\"|dfadf"|
  \''|\|''|
  'foo\ bar'|'foo\ bar'|
  'foo\\ bar'|'foo\\ bar'|
  "foo\\\x bar\" df'a\ 'df'|"foo\\\x bar\"|df'a|\|'df'|
  \"foo"|\|"foo"|
  \"foo"\x|\|"foo"|\|x|
  "foo\x"|"foo\x"|
  "foo\ "|"foo\ "|
  foo\ xx|foo|\|xx|
  foo\ x\x|foo|\|x|\|x|
  foo\ x\x\""|foo|\|x|\|x|\|""|
  "foo\ x\x"|"foo\ x\x"|
  "foo\ x\x\\"|"foo\ x\x\\"|
  "foo\ x\x\\""foobar"|"foo\ x\x\\"|"foobar"|
  "foo\ x\x\\"\''"foobar"|"foo\ x\x\\"|\|''|"foobar"|
  "foo\ x\x\\"\'"fo'obar"|"foo\ x\x\\"|\|'"fo'|obar"|
  "foo\ x\x\\"\'"fo'obar" 'don'\''t'|"foo\ x\x\\"|\|'"fo'|obar"|'don'|\|''|t'|
  'foo\ bar'|'foo\ bar'|
  'foo\\ bar'|'foo\\ bar'|
  foo\ bar|foo|\|bar|
  foo#bar\nbaz|foobaz|
  :-) ;-)|:|-|)|;|-|)|
